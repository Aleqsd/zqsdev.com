[build]
publish = "static"
command = ""

# Serve the résumé viewer directly when the cv subdomain is hit
[[redirects]]
from = "https://cv.zqsdev.com/*"
to = "/cv/:splat"
status = 200
force = true

# Calendly keeps its vanity subdomain but points to the external scheduler
[[redirects]]
from = "https://calendly.zqsdev.com/*"
to = "https://calendly.com/alexandre-zqsdev/30min"
status = 301
force = true

# Convenience redirect for the /calendly path on the main site
[[redirects]]
from = "/calendly"
to = "https://calendly.com/alexandre-zqsdev/30min"
status = 301
force = true

# Proxy API requests to the self-hosted Axum backend
[[redirects]]
from = "/api/*"
to = "https://api.zqsdev.com/api/:splat"
status = 200
force = true

# Catch-all so the SPA stays routable on zqsdev.com / www.zqsdev.com
[[redirects]]
from = "/*"
to = "static/index.html"
status = 200

[[headers]]
for = "/*.webp"
  [headers.values]
  Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
for = "/*.png"
  [headers.values]
  Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
for = "/*.svg"
  [headers.values]
  Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
for = "/*.ico"
  [headers.values]
  Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
for = "/index.html"
  [headers.values]
  Cache-Control = "no-store"

[[headers]]
for = "/*.css"
  [headers.values]
  Cache-Control = "no-store"

[[headers]]
for = "/pkg/*.js"
  [headers.values]
  Cache-Control = "no-store"

[[headers]]
for = "/data/*.json"
  [headers.values]
  Cache-Control = "no-store"
